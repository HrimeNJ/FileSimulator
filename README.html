<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\Hrime\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.15\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<div align="center">
  <h1 style="font-size: 2.5em;">欢迎开启 PA-1 学习之旅! 🚀</h1>
<p>👋 欢迎来到《高级程序设计》2025年春季课程PA-1项目!<br>
😊 本文档作为实验手册，希望能帮助你顺利完成本次PA项目。<br>
😎 通过本次 PA 课程的学习，你将了解并掌握以下内容：</p>
  <ul style="font-size: 1.5em; list-style-type: none; padding: 0;">
    <li>🎯 深入理解 <strong>面向对象</strong> 编程思想</li>
    <li>💡 掌握 C++ 类的设计与实现</li>
    <li>🔧 学会构建完整的软件系统</li>
  </ul>
  <p style="font-size: 1.5em;">🎉 Let's Start now!</p>
</div>
<div align="center">
  <h1>PA-1: 虚拟文件系统</h1>
  <h2>Virtual File System with Command Line Interface (VFS) 🌐</h2>
</div>
<div style="display: flex; justify-content: center; gap: 10px;">
  <img src="https://img.shields.io/badge/C++-17-blue?logo=cplusplus" alt="C++17">
  <img src="https://img.shields.io/badge/CMake-3.10+-brightgreen?logo=cmake" alt="CMake">
  <img src="https://img.shields.io/badge/License-MIT-green" alt="License">
</div>
<h2 id="-1-背景介绍">🎯 1. 背景介绍 </h2>
<p>相信大家都使用过文件管理系统，不论是创建文件和删除文件，我们本次PA项目就是构建一个虚拟文件系统(<strong>VFS</strong>),通过维护 <strong>FileSystem</strong> 类来实现文件管理功能。另外，我还为大家设计了 <strong>ClientInterface</strong> 类，用来模拟用户的命令行操作，从而实现接口设计的可视化信息。</p>
<p><em>虚拟文件系统（<strong>VFS</strong>）是一个模拟真实文件系统的软件实现。通过面向对象的设计方法，<strong>VFS</strong>提供了文件和目录的基本管理功能，帮助理解文件系统的核心概念和面向对象编程思想。</em></p>
<p>🔧 <strong>VFS工作原理</strong>：</p>
<ol>
<li><strong>文件抽象</strong>：将文件和目录统一抽象为类 <code>File</code>, <code>Directory</code>，通过 <code>FileObj</code> 基类实现继承和多态</li>
<li><strong>目录组织</strong>：使用 <code>FileSystem</code> 类组织文件和目录，支持灵活的路径导航</li>
<li><strong>用户交互</strong>：通过 <code>ClientInterface</code> 提供命令行界面，支持类Unix风格的文件操作命令</li>
<li><strong>系统集成</strong>： 通过 <code>VFS</code> 实现对 <code>FileSystem</code> 和 <code>ClientInterface</code> 的集成统一管理。</li>
</ol>
<p>🔄 <strong>系统流程图</strong>：<br>
<img src="x1.png"></p>
<blockquote>
<p>💡 <strong>核心组件说明</strong>kv</p>
<ul>
<li><strong>ClientInterface</strong>：命令解析与用户交互</li>
<li><strong>FileSystem</strong>：文件系统核心逻辑</li>
<li><strong>FileObj及其派生类</strong>：文件/目录的面向对象实现</li>
<li><strong>VFS</strong>: 集成管理上述所有类</li>
</ul>
</blockquote>
<div style="background-color: #ffe6e6; border-left: 4px solid #f44336; padding: 15px; margin: 20px 0; border-radius: 4px;">
<span style="font-size: 20px;">💡 <strong>划重点！</strong></span><br>
<strong>本次PA项目待完成的组件及其功能描述：
<table>
<thead>
<tr>
<th style="text-align:center">组件</th>
<th style="text-align:center">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>ClientInterface</code></td>
<td style="text-align:center">负责命令解析和用户交互</td>
</tr>
<tr>
<td style="text-align:center"><code>FileSystem</code></td>
<td style="text-align:center">实现文件和目录的管理功能</td>
</tr>
<tr>
<td style="text-align:center"><code>FileObj及派生类</code></td>
<td style="text-align:center">提供文件和目录的具体实现</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>项目任务：使用<strong>面向对象</strong>方法实现这三个核心组件，构建完整的<strong>VFS</strong>系统。</p>
</strong></div><strong>


<h2 id="-2-学习目标">🚀 2. 学习目标 </h2>
<table>
<thead>
<tr>
<th>目标类型</th>
<th>具体内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>📚 <strong>类设计</strong></td>
<td>掌握C++类的设计与实现</td>
</tr>
<tr>
<td>🧩 <strong>继承多态</strong></td>
<td>理解并应用继承与多态</td>
</tr>
<tr>
<td>🧠 <strong>系统构建</strong></td>
<td>使用组合与嵌套类构建复杂系统</td>
</tr>
<tr>
<td>🔒 <strong>封装原则</strong></td>
<td>实现访问控制与封装</td>
</tr>
</tbody>
</table>
<h2 id="-3-前瞻学习">🌈 3. 前瞻学习 </h2>
<p>建议在实现PA-1前或过程中了解以下内容：</p>
<ul>
<li><strong>数组</strong>: <code>vector&lt;T&gt;</code> 及其 <code>push(T)</code> <code>pop()</code>方法</li>
<li><strong>字典</strong>: <code>unordered_map&lt;key, value&gt;</code> 以及 增删改查 操作</li>
<li><strong>集合</strong>: <code>set&lt;T&gt;</code> 及其 <code>find(T)</code> <code>insert(T)</code> 方法</li>
<li><strong>数据类型</strong>：<code>enum</code>，<code>size_t</code></li>
<li><strong>字符串</strong>： <code>string</code></li>
<li><strong>输入输出流</strong> <code>isstringstream</code></li>
<li><strong>OOP原则</strong>：继承、多态、封装、抽象</li>
<li>(在PA不同设计过程中一定要注意<strong>抽象一个level</strong>!)</li>
</ul>
<h2 id="-4-项目树框架">👏 4. 项目树框架 </h2>
<div style="background-color:rgb(46, 38, 38); border-radius: 8px; padding: 20px; margin: 20px 0; font-family: 'Consolas', monospace;">
  <div style="color: #569cd6; margin-bottom: 10px;">FileSimulator/</div>
  <div style="color: #dcdcaa; margin-left: 20px;">├── <span style="color: #c586c0;">CMakeLists.txt</span></div>
  <div style="color: #dcdcaa; margin-left: 20px;">├── <span style="color: #4ec9b0;">include/</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #9cdcfe;">FileObj.h</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #9cdcfe;">Directory.h</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #9cdcfe;">FileSystem.h</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #9cdcfe;">VFS.h</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">└── <span style="color: #9cdcfe;">ClientInterface.h</span></div>
  <div style="color: #dcdcaa; margin-left: 20px;">├── <span style="color: #4ec9b0;">src/</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #ce9178;">main.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #ce9178;">FileObj.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #ce9178;">Directory.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #ce9178;">FileSystem.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">├── <span style="color: #ce9178;">VFS.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 40px;">└── <span style="color: #ce9178;">ClientInterface.cpp</span></div>
  <div style="color: #dcdcaa; margin-left: 20px;">└── <span style="color: #c586c0;">README.md</span></div>
</div>
<h2 id="-5-实验指南">✨ 5. 实验指南 </h2>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-0. InodeFactory 类 (include/InodeFactory.h)</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">InodeFactory</span><span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-uint64_t">uint64_t</span> <span class="token function">generateInode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-uint64_t">uint64_t</span> nextInode <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword keyword-return">return</span> nextInode<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>在VFS中， 所有的系统对象（File\Directory）都会拥有唯一的inode标识，类型为uint64_t(which is unsigned long long)。</p>
<p>对于这一全局标识变量的设计，我们已经为你提供了generateInode()这一接口实现，你可以尽情调用这一API接口，默认情况下，FileSystem初始化的根目录"/"具有inode = 1。</p>
<p>所以理论上讲，任意新建文件或文件夹都具有 inode &gt;= 2(我们的VFS并没有设计inode回收机制，所以每次调用新的inode，它都只会变大，且不会出现两次相同的inode)</p>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-1. FileObj（Base class）</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">FileObj</span> <span class="token punctuation">{</span>
    string name<span class="token punctuation">;</span>     <span class="token comment">// 文件/目录名</span>
    string path<span class="token punctuation">;</span>     <span class="token comment">// 绝对路径</span>
    string type<span class="token punctuation">;</span>     <span class="token comment">// "file"或"directory"</span>
    string owner<span class="token punctuation">;</span>    <span class="token comment">// 所有者</span>
    <span class="token keyword keyword-uint64_t">uint64_t</span> inode<span class="token punctuation">;</span>  <span class="token comment">// 唯一标识符</span>
    FileObj<span class="token operator">*</span> parent<span class="token punctuation">;</span> <span class="token comment">// 父目录</span>
<span class="token punctuation">}</span>
</code></pre><p>对于FileObj，各个属性的含义如上注释所说，其中，inode来自于上述所说的InodeFactory类，而parent可以理解为是<em>当前文件/文件夹的父目录</em>，对于'/'根目录，它的parent为nullptr。</p>
<p>另外，我们已经为你实现了对应的API接口与File类的构造函数，你可以学习File和FileObj的构造函数中path属性的设置方法，你可以依照此完成其他类的构造函数。</p>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-2. File class</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>include<span class="token operator">/</span>File<span class="token punctuation">.</span>h<span class="token punctuation">)</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">File</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">FileObj</span></span><span class="token punctuation">{</span>
<span class="token keyword keyword-protected">protected</span><span class="token operator">:</span>
    string content<span class="token punctuation">;</span> <span class="token comment">// content of the file</span>
<span class="token punctuation">}</span>
</code></pre><p>File类只在FileObj的基础上新增了content这一属性。</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>src<span class="token operator">/</span>File<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span> 
<span class="token operator">-</span> <span class="token function">File</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> type<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> owner<span class="token punctuation">,</span>
       <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-uint64_t">uint64_t</span><span class="token operator">&amp;</span> inode<span class="token punctuation">,</span> FileObj<span class="token operator">*</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">-</span> <span class="token keyword keyword-virtual">virtual</span> string <span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>            <span class="token comment">// read content</span>
<span class="token operator">-</span> <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string <span class="token operator">&amp;</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// write content(you can just append it to content), deal with escape character "\"</span>
<span class="token operator">-</span> <span class="token keyword keyword-virtual">virtual</span> string <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>      <span class="token comment">// get content</span>
</code></pre><p>这一File类较为简单，我们已经为你实现了构造函数，你只需要完成读写操作的API即可。<br>
更详细的内容请参考框架代码的TODO内容。</p>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-3. Directory class</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>src<span class="token operator">/</span>Directory<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Directory</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">FileObj</span></span> <span class="token punctuation">{</span>
    std<span class="token double-colon punctuation">::</span>unordered_map<span class="token operator">&lt;</span><span class="token keyword keyword-uint64_t">uint64_t</span><span class="token punctuation">,</span> FileObj<span class="token operator">*</span><span class="token operator">&gt;</span> children<span class="token punctuation">;</span>  <span class="token comment">// store child objects</span>
<span class="token punctuation">}</span>
</code></pre><p>对于Directory class，在FileObj的基础上，新增了一个chidren属性， 类型是<code>unordered_map&lt;uint64_t. FileObj*&gt;</code>，作用是：用我们前面设计的Inode，来映射对应的FileObj* 指针，也即：存储当前目录下的<em>所有子项</em>。</p>
<div style="background-color: #e7f3fe; border-left: 6px solid #2196F3; padding: 15px; margin: 15px 0; border-radius: 4px;">
<strong>💡 提示：</strong><br>
由于inode映射到的是基类指针，所以，你在访问前一般要根据它的type类型来进行类型提升(你可以使用强制类型转换，也可以使用函数<code>dynamic_cast&lt;T&gt;()</code>来实现安全的类型转换)。
</div>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>src<span class="token operator">/</span>Directory<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token operator">-</span> <span class="token function">Directory</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> owner<span class="token punctuation">,</span> 
            <span class="token keyword keyword-const">const</span> <span class="token keyword keyword-uint64_t">uint64_t</span><span class="token operator">&amp;</span> inode<span class="token punctuation">,</span> FileObj<span class="token operator">*</span> parent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">-</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">add</span><span class="token punctuation">(</span>FileObj<span class="token operator">*</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 添加子节点</span>
<span class="token operator">-</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword keyword-uint64_t">uint64_t</span> inode<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 删除文件节点</span>
<span class="token operator">-</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">removeDir</span><span class="token punctuation">(</span><span class="token keyword keyword-uint64_t">uint64_t</span> inode<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 递归删除目录节点</span>
<span class="token operator">-</span> FileObj<span class="token operator">*</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword keyword-uint64_t">uint64_t</span> inode<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 获取指定子节点</span>
<span class="token operator">-</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>FileObj<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span> <span class="token comment">// 获取所有子节点</span>
<span class="token operator">-</span> size_t <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>              <span class="token comment">// 获取子节点数量</span>
<span class="token operator">-</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span><span class="token punctuation">;</span>                 <span class="token comment">// 检查是否为空目录</span>
</code></pre><p><code>Directory</code>类的构造函数可以参考之前实现的<code>File</code>类，对应其他API接口的实现内容如上所示，需要注意的是，remove删除的是子文件，而removeDir删除的是子文件夹，由于这一子文件夹可能还有文件、文件夹，所以需要递归调用完成节点删除。</p>
<div style="background-color: #e7f3fe; border-left: 6px solid #2196F3; padding: 15px; margin: 15px 0; border-radius: 4px;">
<strong>💡 提示：</strong><br>
这里删除子节点时，用且仅用inode作为唯一标识。<br>
更详细的内容请参考框架代码的TODO内容。
</div>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-4. FileSystem (Core functionality)</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>include<span class="token operator">/</span>FileSystem<span class="token punctuation">.</span>h<span class="token punctuation">)</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">FileSystem</span> <span class="token punctuation">{</span>
    Directory<span class="token operator">*</span> root<span class="token punctuation">;</span>     <span class="token comment">// root directory</span>
    Directory<span class="token operator">*</span> cur<span class="token punctuation">;</span>      <span class="token comment">// current directory</span>
    string username<span class="token punctuation">;</span>     <span class="token comment">// current user</span>
    std<span class="token double-colon punctuation">::</span>set<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> users<span class="token punctuation">;</span>  <span class="token comment">// all users</span>
    std<span class="token double-colon punctuation">::</span>unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> <span class="token keyword keyword-uint64_t">uint64_t</span><span class="token operator">&gt;</span> config_table<span class="token punctuation">;</span>  <span class="token comment">// path to inode mapping</span>
<span class="token punctuation">}</span>
</code></pre><p>FileSystem是<code>VFS</code>的核心类，它的属性如上所示，其中<code>root</code>是文件系统的根目录，<code>cur</code>是文件系统的当前目录，<code>username</code>是当前用户，<code>users</code>是所有注册在内的用户，而<code>config_table</code>是一个<code>unordered_map</code>，将一个对象的 <em>绝对路径 + 类型</em> 映射到它的唯一表示<code>inode</code>上（或许这一设计并不完美，但在<code>search()</code>函数里搜索文件/文件夹名时会有高效的结果，而且在其他的API接口中也会经常使用<code>search()</code>函数）。</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>src<span class="token operator">/</span>FileSystem<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment">// 目录导航</span>
<span class="token operator">-</span> <span class="token function">changeDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> <span class="token keyword keyword-uint64_t">uint64_t</span><span class="token operator">&amp;</span> inode<span class="token punctuation">)</span>     <span class="token comment">// 切换当前目录</span>
<span class="token operator">-</span> <span class="token function">getCurrentPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>               <span class="token comment">// 获取当前路径</span>
<span class="token operator">-</span> <span class="token function">resolvePath</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> path<span class="token punctuation">)</span>      <span class="token comment">// 解析路径</span>

<span class="token comment">// 文件操作</span>
<span class="token operator">-</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>       <span class="token comment">// 创建文件</span>
<span class="token operator">-</span> <span class="token function">deleteFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> user<span class="token punctuation">)</span>  <span class="token comment">// 删除文件</span>

<span class="token comment">// 目录操作</span>
<span class="token operator">-</span> <span class="token function">createDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>        <span class="token comment">// 创建目录</span>
<span class="token operator">-</span> <span class="token function">deleteDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> user<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> recursive<span class="token punctuation">)</span>  <span class="token comment">// 删除目录</span>

<span class="token comment">// 搜索和用户管理</span>
<span class="token operator">-</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> type<span class="token punctuation">)</span>       <span class="token comment">// 搜索文件或目录</span>
<span class="token operator">-</span> <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> username<span class="token punctuation">)</span>                      <span class="token comment">// 设置当前用户</span>
<span class="token operator">-</span> <span class="token function">hasUser</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> username<span class="token punctuation">)</span>                      <span class="token comment">// 检查用户是否存在 </span>
<span class="token operator">-</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> username<span class="token punctuation">)</span>                 <span class="token comment">// 注册新用户</span>
</code></pre><p>各个函数的含义如上所示，更多的TODO内容详见框架代码。</p>
<div style="background-color: #e7f3fe; border-left: 6px solid #2196F3; padding: 15px; margin: 15px 0; border-radius: 4px;">
<strong>💡 提示：</strong><br>
1. 在创建文件/文件夹时不需要权限控制，而删除文件/文件夹时需要注意权限控制，只有<code>owner</code>或者<code>root</code>用户可以删除对应文件/文件夹。<br>
2. <code>changeDir()</code>函数中需要调用<code>resolvePath()</code>函数，而在这一函数中，你需要通过'/'来划分字符串，你可以选择C标准库中的<code>strtok()</code>函数，也可以通过C++中的<code>istringstream</code>字符串流通过<code>getline(istringstream, string, '/')</code>来获取每一个解析出来的<code>token</code>。<br>
3. 不论是增加还是删除，你除了维护当前文件夹的<code>children</code>外，还需要维护全局<code>config_table</code>属性。<br>
4. 不同的用户应该共享同一个文件系统，在不同用户使用文件系统时，需要维护集合<code>users</code>（可以通过<code>insert</code>或者<code>remove</code>等函数修改<code>set</code>集合）。<br>
</div>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-5. ClientInterface (User interface)</h3>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token punctuation">(</span>include<span class="token operator">/</span>ClientInterface<span class="token punctuation">.</span>h<span class="token punctuation">)</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">ClientInterface</span> <span class="token punctuation">{</span>
    FileSystem<span class="token operator">*</span> filesystem<span class="token punctuation">;</span>  <span class="token comment">// filesystem instance</span>
    string username<span class="token punctuation">;</span>         <span class="token comment">// current user</span>
<span class="token punctuation">}</span>
</code></pre><p>在ClientInterface这一类中，只拥有filesystem的指针和用户名username，你可能对这一设计模式略感疑惑(明明在FileSystem里面直接调用API就行，为什么还要这么麻烦)，其实我们是按照访问者模式进行设计，你可以这样理解：用户其实只拥有对文件系统的访问权限，而不应该直接嵌入文件系统中；同时，文件系统应该只负责文件管理功能，而不需要有任何解析、除了命令的部分。</p>
<p>所以，聪明的你可能已经发现了，在这一类中，除了命令处理的部分，其他的大多数函数都可以通过filesystem的指针调用API直接实现。</p>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code>ClientInterface类 <span class="token punctuation">(</span>src<span class="token operator">/</span>ClientInterface<span class="token punctuation">.</span>cpp<span class="token punctuation">)</span>
<span class="token comment">// 命令处理</span>
<span class="token operator">-</span> <span class="token function">parseCommand</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> cmdLine<span class="token punctuation">)</span>   <span class="token comment">// 解析命令行</span>
<span class="token operator">-</span> <span class="token function">execueCommand</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token operator">&amp;</span> cmd<span class="token punctuation">)</span>  <span class="token comment">// 执行命令</span>
<span class="token operator">-</span> <span class="token function">processCommand</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> cmdLine<span class="token punctuation">)</span>     <span class="token comment">// 处理命令</span>

<span class="token comment">// 文件操作命令</span>
<span class="token operator">-</span> <span class="token function">createFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>           <span class="token comment">// 创建文件</span>
<span class="token operator">-</span> <span class="token function">deleteFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>           <span class="token comment">// 删除文件</span>
<span class="token operator">-</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>             <span class="token comment">// 读取文件</span>
<span class="token operator">-</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>  <span class="token comment">// 写入文件·</span>

<span class="token comment">// 目录操作命令</span>
<span class="token operator">-</span> <span class="token function">createDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">)</span>            <span class="token comment">// 创建目录</span>
<span class="token operator">-</span> <span class="token function">deleteDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> recursive<span class="token punctuation">)</span>  <span class="token comment">// 删除目录</span>
<span class="token operator">-</span> <span class="token function">changeDir</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> path<span class="token punctuation">)</span>            <span class="token comment">// 切换目录</span>
<span class="token operator">-</span> <span class="token function">listCurrentDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                         <span class="token comment">// 列出目录内容</span>
<span class="token operator">-</span> <span class="token function">getCurrentPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>                   <span class="token comment">// 获取当前路径</span>

<span class="token comment">// 其他命令</span>
<span class="token operator">-</span> <span class="token function">showHelp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword keyword-const">const</span>                                  <span class="token comment">// 显示帮助信息</span>
<span class="token operator">-</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> name<span class="token punctuation">,</span> <span class="token keyword keyword-const">const</span> string<span class="token operator">&amp;</span> type<span class="token punctuation">)</span>    <span class="token comment">// 搜索文件或目录</span>
</code></pre><p>ClientInterface的函数接口如上所示，正如前面所说，对于这部分内容，你可以非常容易的实现文件系统的功能API，剩下的就是对于输入命令行的处理。</p>
<p><code>parseCommand</code> 函数就是将输入的命令行按照<strong>空格切片</strong>，得到字符串数组传入 <code>execueCommand</code> 函数;</p>
<p><code>execueCommand</code>就是通过传入的字符串数组<code>cmd</code>，根据<code>cmd[0]</code>选择具体是哪个命令，而剩下的无非就是该命令的参数<code>args</code>，你只需要把这些<code>args</code>传入之前你实现文件系统的API即可。</p>
<p>至于<code>processCommand</code>，就是把上面两个函数整合到一起，先调用<code>parseCommand</code>,再调用<code>execueCommand</code>就行了。</p>
</div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-6. 需要实现的命令</h3>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># 文件操作</span>
create <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>     <span class="token comment"># 创建一个或多个文件</span>
delete <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>     <span class="token comment"># 删除一个或多个文件</span>
<span class="token builtin class-name">read</span> <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>       <span class="token comment"># 读取一个或多个文件内容</span>
<span class="token function">write</span> <span class="token operator">&lt;</span>filename<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>  <span class="token comment"># 写入文件内容（支持多行文本和转义字符）</span>

<span class="token comment"># 目录操作</span>
<span class="token function">mkdir</span> <span class="token operator">&lt;</span>dirname<span class="token operator">&gt;</span>         <span class="token comment"># 创建目录</span>
<span class="token function">rmdir</span> <span class="token punctuation">[</span>-r<span class="token punctuation">]</span> <span class="token operator">&lt;</span>dirname<span class="token operator">&gt;</span>    <span class="token comment"># 删除目录（-r 表示递归删除）</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>               <span class="token comment"># 切换目录（支持相对,绝对路径, ..路径, . 路径）</span>
<span class="token function">ls</span>                      <span class="token comment"># 列出当前目录内容</span>
<span class="token builtin class-name">pwd</span>                     <span class="token comment"># 显示当前工作目录</span>
<span class="token function">clear</span>                   <span class="token comment"># 命令行清屏操作</span>

<span class="token comment"># 系统命令</span>
<span class="token builtin class-name">help</span>                   <span class="token comment"># 显示帮助信息</span>
<span class="token builtin class-name">exit</span>                   <span class="token comment"># 退出登录</span>
quit                   <span class="token comment"># 退出系统</span>
</code></pre></div>
<div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">5-7. 注意事项</h3>
<div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
<div style="background-color: #fff3cd; border-left: 6px solid #ffc107; padding: 10px; border-radius: 4px;">
<strong>⚠️ 错误处理</strong>
<ul>
  <li>文件已存在</li>
  <li>路径不存在</li>
  <li>权限不足</li>
  <li>参数错误</li>
</ul>
</div>
<div style="background-color: #d4edda; border-left: 6px solid #28a745; padding: 10px; border-radius: 4px;">
<strong>👤 用户管理</strong>
<ul>
  <li>用户创建</li>
  <li>权限验证</li>
  <li>会话交互管理</li>
</ul>
</div>
<div style="background-color: #e7f3fe; border-left: 6px solid #2196F3; padding: 10px; border-radius: 4px;">
<strong>📁 文件操作</strong>
<ul>
  <li>空文件处理</li>
  <li>递归删除</li>
  <li>路径解析</li>
  <li>权限验证</li>
</ul>
</div>
<div style="background-color: #f8d7da; border-left: 6px solid #dc3545; padding: 10px; border-radius: 4px;">
<strong>⚡ 内存管理</strong>
<ul>
  <li>正确释放对象</li>
  <li>避免内存泄漏</li>
  <li>防止悬空指针</li>
</ul>
</div>
</div>
</div>
<h2 id="-6-构建和执行">🚀 6. 构建和执行 </h2>
<h3 id="6-1-windows-环境">6-1 Windows 环境 </h3>
<ol>
<li>生成项目</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># 在项目根目录下执行</span>
<span class="token function">mkdir</span> build
<span class="token builtin class-name">cd</span> build
cmake <span class="token punctuation">..</span>
cmake <span class="token parameter variable">--build</span> <span class="token builtin class-name">.</span>
</code></pre><ol start="2">
<li>运行程序</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># 在 build/bin/Debug 或 build/bin/Release 目录下</span>
FileSimulator.exe
</code></pre><h3 id="6-2-linux-环境">6-2 Linux 环境 </h3>
<ol>
<li>安装依赖</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># Ubuntu/Debian</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential cmake

<span class="token comment"># CentOS/RHEL</span>
<span class="token function">sudo</span> yum groupinstall <span class="token string">"Development Tools"</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> cmake
</code></pre><ol start="2">
<li>生成和编译</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token function">mkdir</span> build
<span class="token builtin class-name">cd</span> build
cmake <span class="token punctuation">..</span>
<span class="token function">make</span>
</code></pre><ol start="3">
<li>运行程序</li>
</ol>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># 在 build/bin 目录下</span>
./FileSimulator
</code></pre><h3 id="6-3-常见问题排查">6-3 常见问题排查 </h3>
<pre data-role="codeBlock" data-info="" class="language-text"><code>1. CMake 报错
   - 确保 CMake 版本 &gt;= 3.10
   - 检查编译器是否正确安装
   - 确保环境变量正确设置

2. 编译错误
   - 检查是否有未安装的依赖
   - 确保使用了正确的生成器
   - 查看详细的编译日志

3. 运行错误
   - 确保在正确的目录下运行程序
   - 检查是否有缺失的动态库
   - 查看程序的错误输出
</code></pre><div style="background-color: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; margin: 20px 0; border-radius: 4px;">
<h3 style="color: #2c3e50; margin-top: 0;">7. 示例代码</h3>
<pre data-role="codeBlock" data-info="bash" class="language-bash bash"><code><span class="token comment"># Start the system</span>
$ ./FileSimulator
File System Simulator Started
Please login with your username
Login: root

<span class="token comment"># Show help</span>
root@FileSimulator:/$ <span class="token builtin class-name">help</span>
Available commands:
  create <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>      - Create one or <span class="token function">more</span> new files
  delete <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>      - Delete one or <span class="token function">more</span> files
  <span class="token builtin class-name">read</span> <span class="token operator">&lt;</span>filename<span class="token punctuation">..</span>.<span class="token operator">&gt;</span>        - Read content from one or <span class="token function">more</span> files
  <span class="token function">write</span> <span class="token operator">&lt;</span>filename<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>   - Write text to <span class="token function">file</span> <span class="token punctuation">(</span>supports <span class="token string">'\\n'</span> <span class="token keyword keyword-for">for</span> newline<span class="token punctuation">)</span>
  <span class="token function">mkdir</span> <span class="token operator">&lt;</span>dirname<span class="token operator">&gt;</span>           - Create a new directory
  <span class="token function">rmdir</span> <span class="token punctuation">[</span>-r<span class="token punctuation">]</span> <span class="token operator">&lt;</span>dirname<span class="token operator">&gt;</span>      - Remove directory <span class="token punctuation">(</span>-r <span class="token keyword keyword-for">for</span> recursive deletion<span class="token punctuation">)</span>
  <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>                - Change directory <span class="token punctuation">(</span>supports relative/absolute paths<span class="token punctuation">)</span>
  <span class="token function">ls</span>                       - List current directory contents
  <span class="token builtin class-name">pwd</span>                      - Show current working directory
  <span class="token function">whoami</span>                   - Show current user name
  <span class="token function">clear</span>                    - Clear current <span class="token builtin class-name">command</span> line
  <span class="token builtin class-name">help</span>                     - Show this <span class="token builtin class-name">help</span> message
  <span class="token builtin class-name">exit</span>                     - Logout current user
  quit                     - Exit program

<span class="token comment"># Some Basic operations</span>
root@FileSimulator:/$ <span class="token function">mkdir</span> docs
root@FileSimulator:/$ <span class="token builtin class-name">cd</span> docs
root@FileSimulator:/docs$ create readme1 readme2
root@FileSimulator:/docs$ <span class="token function">write</span> readme1 <span class="token string">"This is a test file."</span>
root@FileSimulator:/docs$ <span class="token function">write</span> readme2 <span class="token string">"Hello PA-1"</span>
root@FileSimulator:/docs$ <span class="token builtin class-name">read</span> readme1 readme2
<span class="token operator">==</span><span class="token operator">=</span> readm1 <span class="token operator">==</span><span class="token operator">=</span>
This is a <span class="token builtin class-name">test</span> file.
<span class="token operator">==</span><span class="token operator">=</span> readm2 <span class="token operator">==</span><span class="token operator">=</span>
Hello PA-1
root@FileSimulator:/docs$ <span class="token builtin class-name">pwd</span> 
/docs
root@FileSimulator:/docs$ <span class="token function">ls</span>
readme1
readme2
root@FileSimulator:/docs$ <span class="token builtin class-name">exit</span>

<span class="token comment"># exit the program</span>
User Login <span class="token punctuation">(</span>Please input <span class="token function">who</span> you are<span class="token punctuation">)</span>: 
<span class="token builtin class-name">exit</span>
Bye<span class="token operator">!</span>
</code></pre></div>
<h3 id="如在实验过程中有任何疑问请及时联系助教感谢您的阅读">如在实验过程中有任何疑问，请及时联系助教，感谢您的阅读！ </h3>
</strong>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>